"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = SuperAdminDashboard;
var jsx_runtime_1 = require("react/jsx-runtime");
var react_1 = require("react");
var react_query_1 = require("@tanstack/react-query");
var useAuth_1 = require("../hooks/useAuth");
var wouter_1 = require("wouter");
var shared_layout_1 = require("../components/shared-layout");
var button_1 = require("../components/ui/button");
var input_1 = require("../components/ui/input");
var card_1 = require("../components/ui/card");
var tabs_1 = require("../components/ui/tabs");
var lucide_react_1 = require("lucide-react");
var stats_card_1 = require("@/components/stats-card");
var company_card_1 = require("../components/company-card");
var react_i18next_1 = require("react-i18next");
function SuperAdminDashboard() {
    var _unused = { _user: (0, useAuth_1.useAuth)().user }._user;
    return ((0, jsx_runtime_1.jsx)(shared_layout_1.SharedLayout, { children: (0, jsx_runtime_1.jsx)(SuperAdminContent, {}) }));
}
function SuperAdminContent() {
    var _a, _b;
    var _c = (0, wouter_1.useLocation)(), setLocation = _c[1];
    var _d = (0, react_1.useState)(''), searchQuery = _d[0], setSearchQuery = _d[1];
    var _e = (0, react_1.useState)('overview'), activeTab = _e[0], setActiveTab = _e[1];
    var t = (0, react_i18next_1.useTranslation)().t;
    var _f = (0, react_query_1.useQuery)({
        'queryKey': ['/api/super-admin/stats']
    }), stats = _f["data"], _statsLoading = _f["isLoading"], _statsError = _f["error"];
    var _g = (0, react_query_1.useQuery)({
        'queryKey': ['/api/super-admin/companies']
    }), _h = _g["data"], companies = _h === void 0 ? [] : _h, _companiesLoading = _g["isLoading"], _companiesError = _g["error"];
    var filteredCompanies = companies.filter(function (company) { var _a, _b; return (_b = (_a = company === null || company === void 0 ? void 0 : company.name) === null || _a === void 0 ? void 0 : _a.toLowerCase().includes(searchQuery.toLowerCase())) !== null && _b !== void 0 ? _b : false; });
    var handleLogout = function () {
        setLocation('/');
    };
    return ((0, jsx_runtime_1.jsxs)("div", { className: "min-h-screen bg-background", children: [(0, jsx_runtime_1.jsx)("header", { className: "bg-card shadow-sm border-b", children: (0, jsx_runtime_1.jsx)("div", { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8", children: (0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between items-center py-4", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-reverse space-x-4", children: [(0, jsx_runtime_1.jsx)("img", { src: "/logo.svg", alt: "Zeylab Logo", className: "w-10 h-10 object-contain", decoding: "async", fetchPriority: "high", width: "40", height: "40" }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("h1", { className: "text-2xl font-bold text-foreground", children: "Zeylab HRMS" }), (0, jsx_runtime_1.jsx)("p", { className: "text-sm text-muted-foreground", children: "\u0644\u0648\u062D\u0629 \u062A\u062D\u0643\u0645 \u0627\u0644\u0645\u0633\u0624\u0648\u0644 \u0627\u0644\u0639\u0627\u0645" })] })] }), (0, jsx_runtime_1.jsx)("div", { className: "flex items-center space-x-reverse space-x-2", children: (0, jsx_runtime_1.jsx)(button_1.Button, { variant: "outline", size: "sm", onClick: handleLogout, children: "\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062E\u0631\u0648\u062C" }) })] }) }) }), (0, jsx_runtime_1.jsx)("div", { className: "bg-muted/20 border-b", children: (0, jsx_runtime_1.jsx)("div", { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3", children: (0, jsx_runtime_1.jsxs)("div", { className: "flex flex-wrap gap-2 justify-center", children: [(0, jsx_runtime_1.jsxs)(button_1.Button, { variant: "outline", size: "sm", onClick: function () { return setActiveTab('companies'); }, className: "gap-2 hover:bg-blue-50 hover:border-blue-300", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Building2, { className: "h-4 w-4" }), "\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0634\u0631\u0643\u0627\u062A"] }), (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: "outline", size: "sm", onClick: function () { return setLocation('/employees'); }, className: "gap-2 hover:bg-green-50 hover:border-green-300", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Users, { className: "h-4 w-4" }), "\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u0648\u0638\u0641\u064A\u0646"] }), (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: "outline", size: "sm", onClick: function () { return setLocation('/reports'); }, className: "gap-2 hover:bg-yellow-50 hover:border-yellow-300", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.BarChart3, { className: "h-4 w-4" }), "\u0627\u0644\u062A\u0642\u0627\u0631\u064A\u0631"] }), (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: "outline", size: "sm", onClick: function () { return setLocation('/settings'); }, className: "gap-2 hover:bg-gray-50 hover:border-gray-300", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Settings, { className: "h-4 w-4" }), t('settings')] })] }) }) }), (0, jsx_runtime_1.jsx)("main", { role: "main", className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8", children: (0, jsx_runtime_1.jsxs)(tabs_1.Tabs, { value: activeTab, onValueChange: setActiveTab, className: "space-y-6", children: [(0, jsx_runtime_1.jsxs)(tabs_1.TabsList, { className: "grid w-full grid-cols-3", children: [(0, jsx_runtime_1.jsx)(tabs_1.TabsTrigger, { value: "overview", children: "\u0646\u0638\u0631\u0629 \u0639\u0627\u0645\u0629" }), (0, jsx_runtime_1.jsx)(tabs_1.TabsTrigger, { value: "companies", children: "\u0627\u0644\u0634\u0631\u0643\u0627\u062A" }), (0, jsx_runtime_1.jsx)(tabs_1.TabsTrigger, { value: "system", children: "\u0627\u0644\u0646\u0638\u0627\u0645" })] }), (0, jsx_runtime_1.jsx)(tabs_1.TabsContent, { value: "overview", className: "space-y-6", children: (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6", children: [(0, jsx_runtime_1.jsx)(stats_card_1.StatsCard, { title: "\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0634\u0631\u0643\u0627\u062A", value: companies.length, icon: "building", color: "blue" }), (0, jsx_runtime_1.jsx)(stats_card_1.StatsCard, { title: "\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0645\u0648\u0638\u0641\u064A\u0646", value: (_a = stats === null || stats === void 0 ? void 0 : stats.totalEmployees) !== null && _a !== void 0 ? _a : 0, icon: "users", color: "green" }), (0, jsx_runtime_1.jsx)(stats_card_1.StatsCard, { title: "\u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646 \u0627\u0644\u0646\u0634\u0637\u064A\u0646", value: (_b = stats === null || stats === void 0 ? void 0 : stats.activeUsers) !== null && _b !== void 0 ? _b : 0, icon: "users", color: "orange" }), (0, jsx_runtime_1.jsx)(stats_card_1.StatsCard, { title: "\u062D\u0627\u0644\u0629 \u0627\u0644\u0646\u0638\u0627\u0645", value: 1, icon: "check", color: "purple" })] }) }), (0, jsx_runtime_1.jsxs)(tabs_1.TabsContent, { value: "companies", className: "space-y-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex flex-col sm:flex-row gap-4 items-center justify-between", children: [(0, jsx_runtime_1.jsx)("h2", { className: "text-2xl font-bold", children: "\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0634\u0631\u0643\u0627\u062A" }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsxs)("div", { className: "relative", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Search, { className: "absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4" }), (0, jsx_runtime_1.jsx)(input_1.Input, { placeholder: "\u0627\u0644\u0628\u062D\u062B \u0641\u064A \u0627\u0644\u0634\u0631\u0643\u0627\u062A...", className: "pl-4 pr-10 w-64", value: searchQuery, onChange: function (e) { return setSearchQuery(e.target.value); } })] }), (0, jsx_runtime_1.jsxs)(button_1.Button, { onClick: function () { return setLocation('/companies'); }, className: "gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Plus, { className: "h-4 w-4" }), "\u0634\u0631\u0643\u0629 \u062C\u062F\u064A\u062F\u0629"] })] })] }), (0, jsx_runtime_1.jsx)("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6", children: filteredCompanies.map(function (company) { return ((0, jsx_runtime_1.jsx)(company_card_1.CompanyCard, { company: company }, company.id)); }) })] }), (0, jsx_runtime_1.jsxs)(tabs_1.TabsContent, { value: "system", className: "space-y-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6", children: [(0, jsx_runtime_1.jsx)(stats_card_1.StatsCard, { title: "\u062D\u0627\u0644\u0629 \u0627\u0644\u0646\u0638\u0627\u0645", value: 1, icon: "check", color: "green" }), (0, jsx_runtime_1.jsx)(stats_card_1.StatsCard, { title: "\u0627\u0633\u062A\u062E\u062F\u0627\u0645 \u0627\u0644\u062E\u0627\u062F\u0645", value: 78, icon: "users", color: "blue" }), (0, jsx_runtime_1.jsx)(stats_card_1.StatsCard, { title: "\u0642\u0627\u0639\u062F\u0629 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A", value: 1, icon: "check", color: "green" }), (0, jsx_runtime_1.jsx)(stats_card_1.StatsCard, { title: "\u0627\u0644\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0623\u062E\u064A\u0631", value: 29, icon: "certificate", color: "purple" })] }), (0, jsx_runtime_1.jsx)("h2", { className: "text-2xl font-bold", children: "\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0646\u0638\u0627\u0645" }), (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6", children: [(0, jsx_runtime_1.jsx)(card_1.Card, { className: "cursor-pointer hover:shadow-lg transition-shadow", onClick: function () { return setLocation('/settings'); }, children: (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: "p-6 text-center", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Settings, { className: "h-12 w-12 text-gray-500 mx-auto mb-4" }), (0, jsx_runtime_1.jsx)("h3", { className: "font-semibold mb-2", children: "\u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u0646\u0638\u0627\u0645" }), (0, jsx_runtime_1.jsx)("p", { className: "text-sm text-muted-foreground", children: "\u062A\u0643\u0648\u064A\u0646 \u0627\u0644\u0646\u0638\u0627\u0645 \u0627\u0644\u0639\u0627\u0645" })] }) }), (0, jsx_runtime_1.jsx)(card_1.Card, { className: "cursor-pointer hover:shadow-lg transition-shadow", onClick: function () { return setLocation('/employees'); }, children: (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: "p-6 text-center", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Users, { className: "h-12 w-12 text-blue-500 mx-auto mb-4" }), (0, jsx_runtime_1.jsx)("h3", { className: "font-semibold mb-2", children: "\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646" }), (0, jsx_runtime_1.jsx)("p", { className: "text-sm text-muted-foreground", children: "\u0635\u0644\u0627\u062D\u064A\u0627\u062A \u0648\u0623\u062F\u0648\u0627\u0631 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646" })] }) }), (0, jsx_runtime_1.jsx)(card_1.Card, { className: "cursor-pointer hover:shadow-lg transition-shadow", onClick: function () { return setLocation('/reports'); }, children: (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: "p-6 text-center", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FileText, { className: "h-12 w-12 text-green-500 mx-auto mb-4" }), (0, jsx_runtime_1.jsx)("h3", { className: "font-semibold mb-2", children: "\u0633\u062C\u0644\u0627\u062A \u0627\u0644\u0646\u0638\u0627\u0645" }), (0, jsx_runtime_1.jsx)("p", { className: "text-sm text-muted-foreground", children: "\u0645\u0631\u0627\u0642\u0628\u0629 \u0646\u0634\u0627\u0637 \u0627\u0644\u0646\u0638\u0627\u0645" })] }) })] })] })] }) })] }));
}
