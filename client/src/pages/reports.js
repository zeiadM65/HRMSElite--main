"use strict";
var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {
    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
        if (ar || !(i in from)) {
            if (!ar) ar = Array.prototype.slice.call(from, 0, i);
            ar[i] = from[i];
        }
    }
    return to.concat(ar || Array.prototype.slice.call(from));
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = ReportsPage;
var jsx_runtime_1 = require("react/jsx-runtime");
var react_1 = require("react");
var react_query_1 = require("@tanstack/react-query");
var card_1 = require("@/components/ui/card");
var tabs_1 = require("@/components/ui/tabs");
var button_1 = require("@/components/ui/button");
var badge_1 = require("@/components/ui/badge");
var alert_1 = require("@/components/ui/alert");
var lucide_react_1 = require("lucide-react");
// Simple PDF Reports Component
var PDFReports = function (_a) {
    var _companyId = _a.companyId;
    return ((0, jsx_runtime_1.jsxs)("div", { className: "space-y-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)("h2", { className: "text-2xl font-bold", children: "\u062A\u0642\u0627\u0631\u064A\u0631 PDF" }), (0, jsx_runtime_1.jsxs)(button_1.Button, { children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Plus, { className: "h-4 w-4 mr-2" }), "\u0625\u0646\u0634\u0627\u0621 \u062A\u0642\u0631\u064A\u0631 \u062C\u062F\u064A\u062F"] })] }), (0, jsx_runtime_1.jsx)("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4", children: [
                    { 'name': 'قائمة الموظفين', 'type': 'employee', 'date': '2024-01-15' },
                    { 'name': 'كشف المرتبات', 'type': 'payroll', 'date': '2024-01-10' },
                    { 'name': 'تقرير الحضور', 'type': 'attendance', 'date': '2024-01-12' },
                    { 'name': 'التقرير المالي', 'type': 'financial', 'date': '2024-01-08' },
                    { 'name': 'تقرير الإجازات', 'type': 'leave', 'date': '2024-01-05' },
                    { 'name': 'تقرير الأداء', 'type': 'performance', 'date': '2024-01-03' }
                ].map(function (report, index) { return ((0, jsx_runtime_1.jsxs)(card_1.Card, { className: "hover:shadow-md transition-shadow", children: [(0, jsx_runtime_1.jsxs)(card_1.CardHeader, { children: [(0, jsx_runtime_1.jsx)(card_1.CardTitle, { className: "text-lg", children: report.name }), (0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: "outline", children: report.type })] }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { children: [(0, jsx_runtime_1.jsxs)("p", { className: "text-sm text-muted-foreground mb-4", children: ["\u062A\u0645 \u0625\u0646\u0634\u0627\u0624\u0647 \u0641\u064A ", report.date] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex gap-2", children: [(0, jsx_runtime_1.jsxs)(button_1.Button, { size: "sm", variant: "outline", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Download, { className: "h-4 w-4 mr-1" }), "\u062A\u062D\u0645\u064A\u0644"] }), (0, jsx_runtime_1.jsxs)(button_1.Button, { size: "sm", variant: "ghost", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Eye, { className: "h-4 w-4 mr-1" }), "\u0645\u0639\u0627\u064A\u0646\u0629"] })] })] })] }, index)); }) })] }));
};
// Simple Document Management Component
var DocumentManagement = function (_a) {
    var _companyId = _a.companyId;
    return ((0, jsx_runtime_1.jsxs)("div", { className: "space-y-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)("h2", { className: "text-2xl font-bold", children: "\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u0633\u062A\u0646\u062F\u0627\u062A" }), (0, jsx_runtime_1.jsxs)(button_1.Button, { children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Upload, { className: "h-4 w-4 mr-2" }), "\u0631\u0641\u0639 \u0645\u0633\u062A\u0646\u062F \u062C\u062F\u064A\u062F"] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex gap-4 mb-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex-1 relative", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Search, { className: "absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground" }), (0, jsx_runtime_1.jsx)("input", { type: "text", placeholder: "\u0627\u0644\u0628\u062D\u062B \u0641\u064A \u0627\u0644\u0645\u0633\u062A\u0646\u062F\u0627\u062A...", className: "w-full pl-10 pr-4 py-2 border rounded-md" })] }), (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: "outline", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Filter, { className: "h-4 w-4 mr-2" }), "\u062A\u0635\u0641\u064A\u0629"] })] }), (0, jsx_runtime_1.jsx)("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4", children: [
                    {
                        'name': 'عقد العمل - أحمد محمد', 'type': 'contract', 'size': '2.5 MB', 'date': '2024-01-15'
                    },
                    { 'name': 'صورة الهوية - فاطمة علي', 'type': 'id', 'size': '1.2 MB', 'date': '2024-01-14' },
                    {
                        'name': 'شهادة الخبرة - محمد أحمد', 'type': 'certificate', 'size': '3.1 MB', 'date': '2024-01-13'
                    },
                    { 'name': 'الترخيص التجاري', 'type': 'license', 'size': '5.8 MB', 'date': '2024-01-12' },
                    { 'name': 'النموذج الحكومي 1', 'type': 'government', 'size': '1.8 MB', 'date': '2024-01-11' },
                    { 'name': 'تقرير التدريب', 'type': 'training', 'size': '2.3 MB', 'date': '2024-01-10' }
                ].map(function (doc, index) { return ((0, jsx_runtime_1.jsxs)(card_1.Card, { className: "hover:shadow-md transition-shadow", children: [(0, jsx_runtime_1.jsxs)(card_1.CardHeader, { children: [(0, jsx_runtime_1.jsx)(card_1.CardTitle, { className: "text-lg", children: doc.name }), (0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: "outline", children: doc.type })] }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { children: [(0, jsx_runtime_1.jsxs)("p", { className: "text-sm text-muted-foreground mb-2", children: ["\u0627\u0644\u062D\u062C\u0645: ", doc.size] }), (0, jsx_runtime_1.jsxs)("p", { className: "text-sm text-muted-foreground mb-4", children: ["\u062A\u0645 \u0627\u0644\u0631\u0641\u0639 \u0641\u064A ", doc.date] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex gap-2", children: [(0, jsx_runtime_1.jsxs)(button_1.Button, { size: "sm", variant: "outline", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Download, { className: "h-4 w-4 mr-1" }), "\u062A\u062D\u0645\u064A\u0644"] }), (0, jsx_runtime_1.jsxs)(button_1.Button, { size: "sm", variant: "ghost", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Eye, { className: "h-4 w-4 mr-1" }), "\u0645\u0639\u0627\u064A\u0646\u0629"] })] })] })] }, index)); }) })] }));
};
// AI Summary Component
var AISummary = function (_a) {
    var _b, _c, _d, _e, _f, _g, _h, _j, _k;
    var companyId = _a.companyId;
    var _l = (0, react_query_1.useQuery)({
        queryKey: ['ai-summary', companyId],
        queryFn: function () { return fetch("/api/ai/summary?companyId=".concat(companyId), { 'credentials': 'include' }).then(function (res) { return res.json(); }); }
    }), aiSummary = _l.data, isLoading = _l.isLoading, error = _l.error;
    if (isLoading) {
        return ((0, jsx_runtime_1.jsx)(card_1.Card, { children: (0, jsx_runtime_1.jsx)(card_1.CardContent, { className: "p-6", children: (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-center", children: [(0, jsx_runtime_1.jsx)("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-primary" }), (0, jsx_runtime_1.jsx)("span", { className: "mr-3", children: "\u062C\u0627\u0631\u064A \u062A\u062D\u0644\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A..." })] }) }) }));
    }
    if (error) {
        return ((0, jsx_runtime_1.jsxs)(alert_1.Alert, { variant: "destructive", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.AlertTriangle, { className: "h-4 w-4" }), (0, jsx_runtime_1.jsx)(alert_1.AlertDescription, { children: "\u062D\u062F\u062B \u062E\u0637\u0623 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u062A\u062D\u0644\u064A\u0644 \u0627\u0644\u0630\u0643\u064A. \u064A\u0631\u062C\u0649 \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062E\u0631\u0649." })] }));
    }
    return ((0, jsx_runtime_1.jsxs)("div", { className: "space-y-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsxs)("h2", { className: "text-2xl font-bold flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Brain, { className: "h-6 w-6 text-primary" }), "\u0627\u0644\u062A\u062D\u0644\u064A\u0644 \u0627\u0644\u0630\u0643\u064A \u0627\u0644\u0634\u0627\u0645\u0644"] }), (0, jsx_runtime_1.jsxs)(badge_1.Badge, { variant: "secondary", className: "flex items-center gap-1", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Clock, { className: "h-3 w-3" }), "\u0645\u062D\u062F\u062B \u0627\u0644\u0622\u0646"] })] }), (0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Eye, { className: "h-5 w-5" }), "\u0646\u0638\u0631\u0629 \u0639\u0627\u0645\u0629"] }) }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { children: [(0, jsx_runtime_1.jsx)("p", { className: "text-muted-foreground mb-4", children: (_b = aiSummary === null || aiSummary === void 0 ? void 0 : aiSummary.summary) === null || _b === void 0 ? void 0 : _b.overview }), (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-2 md:grid-cols-4 gap-4", children: [(0, jsx_runtime_1.jsxs)("div", { className: "text-center p-3 bg-blue-50 rounded-lg", children: [(0, jsx_runtime_1.jsx)("div", { className: "text-2xl font-bold text-blue-600", children: (_c = aiSummary === null || aiSummary === void 0 ? void 0 : aiSummary.metrics) === null || _c === void 0 ? void 0 : _c.totalEmployees }), (0, jsx_runtime_1.jsx)("div", { className: "text-sm text-muted-foreground", children: "\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0645\u0648\u0638\u0641\u064A\u0646" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "text-center p-3 bg-green-50 rounded-lg", children: [(0, jsx_runtime_1.jsxs)("div", { className: "text-2xl font-bold text-green-600", children: [(_d = aiSummary === null || aiSummary === void 0 ? void 0 : aiSummary.metrics) === null || _d === void 0 ? void 0 : _d.satisfactionScore, "%"] }), (0, jsx_runtime_1.jsx)("div", { className: "text-sm text-muted-foreground", children: "\u0631\u0636\u0627 \u0627\u0644\u0645\u0648\u0638\u0641\u064A\u0646" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "text-center p-3 bg-orange-50 rounded-lg", children: [(0, jsx_runtime_1.jsxs)("div", { className: "text-2xl font-bold text-orange-600", children: [(_e = aiSummary === null || aiSummary === void 0 ? void 0 : aiSummary.metrics) === null || _e === void 0 ? void 0 : _e.turnoverRate, "%"] }), (0, jsx_runtime_1.jsx)("div", { className: "text-sm text-muted-foreground", children: "\u0645\u0639\u062F\u0644 \u0627\u0644\u062F\u0648\u0631\u0627\u0646" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "text-center p-3 bg-purple-50 rounded-lg", children: [(0, jsx_runtime_1.jsx)("div", { className: "text-2xl font-bold text-purple-600", children: (_f = aiSummary === null || aiSummary === void 0 ? void 0 : aiSummary.metrics) === null || _f === void 0 ? void 0 : _f.avgSalary }), (0, jsx_runtime_1.jsx)("div", { className: "text-sm text-muted-foreground", children: "\u0645\u062A\u0648\u0633\u0637 \u0627\u0644\u0631\u0627\u062A\u0628" })] })] })] })] }), (0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Lightbulb, { className: "h-5 w-5" }), "\u0627\u0644\u0631\u0624\u0649 \u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629"] }) }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { children: (0, jsx_runtime_1.jsx)("div", { className: "space-y-3", children: (_h = (_g = aiSummary === null || aiSummary === void 0 ? void 0 : aiSummary.summary) === null || _g === void 0 ? void 0 : _g.keyInsights) === null || _h === void 0 ? void 0 : _h.map(function (insight, index) { return ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-start gap-3 p-3 bg-muted/50 rounded-lg", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.CheckCircle, { className: "h-5 w-5 text-green-600 mt-0.5" }), (0, jsx_runtime_1.jsx)("span", { className: "text-sm", children: insight })] }, index)); }) }) })] }), (0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Target, { className: "h-5 w-5" }), "\u0627\u0644\u062A\u0648\u0635\u064A\u0627\u062A \u0627\u0644\u0630\u0643\u064A\u0629"] }) }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { children: (0, jsx_runtime_1.jsx)("div", { className: "space-y-3", children: (_k = (_j = aiSummary === null || aiSummary === void 0 ? void 0 : aiSummary.summary) === null || _j === void 0 ? void 0 : _j.recommendations) === null || _k === void 0 ? void 0 : _k.map(function (recommendation, index) { return ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-start gap-3 p-3 bg-blue-50 rounded-lg", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Target, { className: "h-5 w-5 text-blue-600 mt-0.5" }), (0, jsx_runtime_1.jsx)("span", { className: "text-sm", children: recommendation })] }, index)); }) }) })] })] }));
};
// AI Insights Component
var AIInsights = function (_a) {
    var _b;
    var companyId = _a.companyId;
    var _c = (0, react_1.useState)('employee'), selectedType = _c[0], setSelectedType = _c[1];
    var _d = (0, react_query_1.useQuery)({
        queryKey: ['ai-insights', companyId, selectedType],
        queryFn: function () { return fetch("/api/ai/insights?companyId=".concat(companyId, "&type=").concat(selectedType), { 'credentials': 'include' }).then(function (res) { return res.json(); }); }
    }), insights = _d.data, isLoading = _d.isLoading;
    return ((0, jsx_runtime_1.jsxs)("div", { className: "space-y-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsxs)("h2", { className: "text-2xl font-bold flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Brain, { className: "h-6 w-6 text-primary" }), "\u0627\u0644\u0631\u0624\u0649 \u0627\u0644\u0630\u0643\u064A\u0629"] }), (0, jsx_runtime_1.jsx)("div", { className: "flex gap-2", children: ['employee', 'financial', 'operational'].map(function (type) { return ((0, jsx_runtime_1.jsxs)(button_1.Button, { variant: selectedType === type ? 'default' : 'outline', size: "sm", onClick: function () { return setSelectedType(type); }, children: [type === 'employee' && 'الموظفين', type === 'financial' && 'المالية', type === 'operational' && 'التشغيلية'] }, type)); }) })] }), isLoading ? ((0, jsx_runtime_1.jsx)(card_1.Card, { children: (0, jsx_runtime_1.jsx)(card_1.CardContent, { className: "p-6", children: (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-center", children: [(0, jsx_runtime_1.jsx)("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-primary" }), (0, jsx_runtime_1.jsx)("span", { className: "mr-3", children: "\u062C\u0627\u0631\u064A \u062A\u062D\u0644\u064A\u0644 \u0627\u0644\u0631\u0624\u0649..." })] }) }) })) : ((0, jsx_runtime_1.jsx)("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: (_b = insights === null || insights === void 0 ? void 0 : insights.insights) === null || _b === void 0 ? void 0 : _b.map(function (insight) { return ((0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)(card_1.CardTitle, { className: "text-lg", children: insight.title }), (0, jsx_runtime_1.jsxs)(badge_1.Badge, { variant: insight.impact === 'positive' ? 'default' : 'destructive', className: "flex items-center gap-1", children: [insight.confidence, "%"] })] }) }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { children: [(0, jsx_runtime_1.jsx)("p", { className: "text-muted-foreground mb-3", children: insight.description }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [insight.impact === 'positive' ? ((0, jsx_runtime_1.jsx)(lucide_react_1.TrendingUp, { className: "h-4 w-4 text-green-600" })) : ((0, jsx_runtime_1.jsx)(lucide_react_1.AlertTriangle, { className: "h-4 w-4 text-red-600" })), (0, jsx_runtime_1.jsx)("span", { className: "text-sm text-muted-foreground", children: insight.impact === 'positive' ? 'تأثير إيجابي' : 'تأثير سلبي' })] })] })] }, insight.id)); }) }))] }));
};
// AI Predictions Component
var AIPredictions = function (_a) {
    var companyId = _a.companyId;
    var _b = (0, react_1.useState)('shortTerm'), selectedTimeframe = _b[0], setSelectedTimeframe = _b[1];
    var _c = (0, react_query_1.useQuery)({
        queryKey: ['ai-predictions', companyId, selectedTimeframe],
        queryFn: function () { return fetch("/api/ai/predictions?companyId=".concat(companyId, "&timeframe=").concat(selectedTimeframe), { 'credentials': 'include' }).then(function (res) { return res.json(); }); }
    }), predictions = _c.data, isLoading = _c.isLoading;
    return ((0, jsx_runtime_1.jsxs)("div", { className: "space-y-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsxs)("h2", { className: "text-2xl font-bold flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Target, { className: "h-6 w-6 text-primary" }), "\u0627\u0644\u062A\u0648\u0642\u0639\u0627\u062A \u0627\u0644\u0630\u0643\u064A\u0629"] }), (0, jsx_runtime_1.jsx)("div", { className: "flex gap-2", children: [
                            { 'key': 'shortTerm', 'label': 'قصيرة المدى' },
                            { 'key': 'mediumTerm', 'label': 'متوسطة المدى' },
                            { 'key': 'longTerm', 'label': 'طويلة المدى' }
                        ].map(function (timeframe) { return ((0, jsx_runtime_1.jsx)(button_1.Button, { variant: selectedTimeframe === timeframe.key ? 'default' : 'outline', size: "sm", onClick: function () { return setSelectedTimeframe(timeframe.key); }, children: timeframe.label }, timeframe.key)); }) })] }), isLoading ? ((0, jsx_runtime_1.jsx)(card_1.Card, { children: (0, jsx_runtime_1.jsx)(card_1.CardContent, { className: "p-6", children: (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-center", children: [(0, jsx_runtime_1.jsx)("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-primary" }), (0, jsx_runtime_1.jsx)("span", { className: "mr-3", children: "\u062C\u0627\u0631\u064A \u062A\u062D\u0644\u064A\u0644 \u0627\u0644\u062A\u0648\u0642\u0639\u0627\u062A..." })] }) }) })) : ((0, jsx_runtime_1.jsx)("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: predictions === null || predictions === void 0 ? void 0 : predictions.map(function (prediction) { return ((0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsx)(card_1.CardTitle, { className: "text-lg", children: prediction.title }), (0, jsx_runtime_1.jsxs)(badge_1.Badge, { variant: prediction.impact === 'positive' ? 'default' : 'secondary', className: "flex items-center gap-1", children: [prediction.confidence, "%"] })] }) }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { children: [(0, jsx_runtime_1.jsx)("p", { className: "text-muted-foreground mb-3", children: prediction.prediction }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-2", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Clock, { className: "h-4 w-4 text-muted-foreground" }), (0, jsx_runtime_1.jsx)("span", { className: "text-sm text-muted-foreground", children: prediction.timeframe })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [prediction.impact === 'positive' ? ((0, jsx_runtime_1.jsx)(lucide_react_1.TrendingUp, { className: "h-4 w-4 text-green-600" })) : ((0, jsx_runtime_1.jsx)(lucide_react_1.Activity, { className: "h-4 w-4 text-blue-600" })), (0, jsx_runtime_1.jsx)("span", { className: "text-sm text-muted-foreground", children: prediction.impact === 'positive' ? 'تأثير إيجابي' : 'تأثير محايد' })] })] }), prediction.factors && ((0, jsx_runtime_1.jsxs)("div", { className: "mt-3 pt-3 border-t", children: [(0, jsx_runtime_1.jsx)("p", { className: "text-sm font-medium mb-2", children: "\u0627\u0644\u0639\u0648\u0627\u0645\u0644 \u0627\u0644\u0645\u0624\u062B\u0631\u0629:" }), (0, jsx_runtime_1.jsx)("div", { className: "space-y-1", children: prediction.factors.map(function (factor, index) { return ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)("div", { className: "w-1 h-1 bg-primary rounded-full" }), (0, jsx_runtime_1.jsx)("span", { className: "text-xs text-muted-foreground", children: factor })] }, index)); }) })] }))] })] }, prediction.id)); }) }))] }));
};
// AI Trends Component
var AITrends = function (_a) {
    var companyId = _a.companyId;
    var _b = (0, react_1.useState)('employee'), selectedMetric = _b[0], setSelectedMetric = _b[1];
    var _c = (0, react_query_1.useQuery)({
        queryKey: ['ai-trends', companyId, selectedMetric],
        queryFn: function () { return fetch("/api/ai/trends?companyId=".concat(companyId, "&metric=").concat(selectedMetric), { 'credentials': 'include' }).then(function (res) { return res.json(); }); }
    }), trends = _c.data, isLoading = _c.isLoading;
    return ((0, jsx_runtime_1.jsxs)("div", { className: "space-y-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsxs)("h2", { className: "text-2xl font-bold flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.TrendingUp, { className: "h-6 w-6 text-primary" }), "\u062A\u062D\u0644\u064A\u0644 \u0627\u0644\u0627\u062A\u062C\u0627\u0647\u0627\u062A"] }), (0, jsx_runtime_1.jsx)("div", { className: "flex gap-2", children: [
                            { 'key': 'employee', 'label': 'الموظفين', 'icon': lucide_react_1.Users },
                            { 'key': 'satisfaction', 'label': 'الرضا', 'icon': lucide_react_1.CheckCircle },
                            { 'key': 'attendance', 'label': 'الحضور', 'icon': lucide_react_1.Activity }
                        ].map(function (metric) { return ((0, jsx_runtime_1.jsxs)(button_1.Button, { variant: selectedMetric === metric.key ? 'default' : 'outline', size: "sm", onClick: function () { return setSelectedMetric(metric.key); }, className: "flex items-center gap-1", children: [(0, jsx_runtime_1.jsx)(metric.icon, { className: "h-4 w-4" }), metric.label] }, metric.key)); }) })] }), isLoading ? ((0, jsx_runtime_1.jsx)(card_1.Card, { children: (0, jsx_runtime_1.jsx)(card_1.CardContent, { className: "p-6", children: (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-center", children: [(0, jsx_runtime_1.jsx)("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-primary" }), (0, jsx_runtime_1.jsx)("span", { className: "mr-3", children: "\u062C\u0627\u0631\u064A \u062A\u062D\u0644\u064A\u0644 \u0627\u0644\u0627\u062A\u062C\u0627\u0647\u0627\u062A..." })] }) }) })) : ((0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)(card_1.CardTitle, { children: ["\u0627\u062A\u062C\u0627\u0647 ", selectedMetric === 'employee' ? 'الموظفين' : selectedMetric === 'satisfaction' ? 'الرضا' : 'الحضور'] }) }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { children: (0, jsx_runtime_1.jsx)("div", { className: "h-64 flex items-end justify-between gap-2 p-4", children: (function () {
                                var maxValue = Math.max.apply(Math, __spreadArray(__spreadArray([], (trends !== null && trends !== void 0 ? trends : []).map(function (t) { return t.value; }), false), [0], false));
                                return trends === null || trends === void 0 ? void 0 : trends.map(function (trend, _index) {
                                    var height = maxValue ? (trend.value / maxValue) * 100 : 0;
                                    return ((0, jsx_runtime_1.jsxs)("div", { className: "flex flex-col items-center gap-2", children: [(0, jsx_runtime_1.jsx)("div", { className: "w-8 rounded-t-sm transition-all hover:bg-primary/80 ".concat(trend.trend === 'up' ? 'bg-green-500'
                                                    : trend.trend === 'down' ? 'bg-red-500' : 'bg-blue-500'), style: { 'height': "".concat(height, "%") } }), (0, jsx_runtime_1.jsx)("span", { className: "text-xs text-muted-foreground", children: trend.month }), (0, jsx_runtime_1.jsx)("span", { className: "text-xs font-medium", children: trend.value })] }, trend.month));
                                });
                            })() }) })] }))] }));
};
function ReportsPage() {
    var _a = (0, react_1.useState)('ai-summary'), activeTab = _a[0], setActiveTab = _a[1];
    // محاكاة دور المستخدم - في التطبيق الفعلي سيأتي من السياق
    var _userRole = 'company-manager'; // أو أي دور آخر
    var companyId = 'company-1';
    var _userId = 'user-1';
    return ((0, jsx_runtime_1.jsxs)("main", { role: "main", className: "container mx-auto px-4 py-8 space-y-8", children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("h1", { className: "text-3xl font-bold text-foreground", children: "\u0627\u0644\u062A\u0642\u0627\u0631\u064A\u0631 \u0648\u0627\u0644\u0645\u0633\u062A\u0646\u062F\u0627\u062A" }), (0, jsx_runtime_1.jsx)("p", { className: "text-muted-foreground mt-2", children: "\u0625\u062F\u0627\u0631\u0629 \u0634\u0627\u0645\u0644\u0629 \u0644\u0644\u062A\u0642\u0627\u0631\u064A\u0631 \u0648\u0627\u0644\u0645\u0633\u062A\u0646\u062F\u0627\u062A \u0648\u0644\u0648\u062D\u0627\u062A \u0627\u0644\u062A\u062D\u0643\u0645 \u0627\u0644\u0645\u062A\u062E\u0635\u0635\u0629 \u0645\u0639 \u0627\u0644\u0630\u0643\u0627\u0621 \u0627\u0644\u0627\u0635\u0637\u0646\u0627\u0639\u064A" })] }), (0, jsx_runtime_1.jsxs)(tabs_1.Tabs, { value: activeTab, onValueChange: setActiveTab, className: "w-full", children: [(0, jsx_runtime_1.jsxs)(tabs_1.TabsList, { className: "grid w-full grid-cols-6", children: [(0, jsx_runtime_1.jsxs)(tabs_1.TabsTrigger, { value: "ai-summary", className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Brain, { className: "h-4 w-4" }), "\u0627\u0644\u062A\u062D\u0644\u064A\u0644 \u0627\u0644\u0630\u0643\u064A"] }), (0, jsx_runtime_1.jsxs)(tabs_1.TabsTrigger, { value: "ai-insights", className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Lightbulb, { className: "h-4 w-4" }), "\u0627\u0644\u0631\u0624\u0649 \u0627\u0644\u0630\u0643\u064A\u0629"] }), (0, jsx_runtime_1.jsxs)(tabs_1.TabsTrigger, { value: "ai-predictions", className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Target, { className: "h-4 w-4" }), "\u0627\u0644\u062A\u0648\u0642\u0639\u0627\u062A"] }), (0, jsx_runtime_1.jsxs)(tabs_1.TabsTrigger, { value: "ai-trends", className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.TrendingUp, { className: "h-4 w-4" }), "\u0627\u0644\u0627\u062A\u062C\u0627\u0647\u0627\u062A"] }), (0, jsx_runtime_1.jsxs)(tabs_1.TabsTrigger, { value: "reports", className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FileText, { className: "h-4 w-4" }), "\u062A\u0642\u0627\u0631\u064A\u0631 PDF"] }), (0, jsx_runtime_1.jsxs)(tabs_1.TabsTrigger, { value: "documents", className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FolderOpen, { className: "h-4 w-4" }), "\u0627\u0644\u0645\u0633\u062A\u0646\u062F\u0627\u062A"] })] }), (0, jsx_runtime_1.jsx)(tabs_1.TabsContent, { value: "ai-summary", className: "space-y-6", children: (0, jsx_runtime_1.jsx)(AISummary, { companyId: companyId }) }), (0, jsx_runtime_1.jsx)(tabs_1.TabsContent, { value: "ai-insights", className: "space-y-6", children: (0, jsx_runtime_1.jsx)(AIInsights, { companyId: companyId }) }), (0, jsx_runtime_1.jsx)(tabs_1.TabsContent, { value: "ai-predictions", className: "space-y-6", children: (0, jsx_runtime_1.jsx)(AIPredictions, { companyId: companyId }) }), (0, jsx_runtime_1.jsx)(tabs_1.TabsContent, { value: "ai-trends", className: "space-y-6", children: (0, jsx_runtime_1.jsx)(AITrends, { companyId: companyId }) }), (0, jsx_runtime_1.jsx)(tabs_1.TabsContent, { value: "reports", className: "space-y-6", children: (0, jsx_runtime_1.jsx)(PDFReports, { companyId: companyId }) }), (0, jsx_runtime_1.jsx)(tabs_1.TabsContent, { value: "documents", className: "space-y-6", children: (0, jsx_runtime_1.jsx)(DocumentManagement, { companyId: companyId }) })] })] }));
}
