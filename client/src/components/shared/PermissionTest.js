"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PermissionTest = PermissionTest;
var jsx_runtime_1 = require("react/jsx-runtime");
var usePermissions_1 = require("../../hooks/usePermissions");
var card_1 = require("../ui/card");
var badge_1 = require("../ui/badge");
var separator_1 = require("../ui/separator");
var lucide_react_1 = require("lucide-react");
var react_i18next_1 = require("react-i18next");
function PermissionTest() {
    var _a = (0, usePermissions_1.usePermissions)(), currentRole = _a.currentRole, roleLabel = _a.roleLabel, roleDescription = _a.roleDescription, roleLevel = _a.roleLevel, getCurrentRolePermissions = _a.getCurrentRolePermissions, getAccessiblePagesForCurrentRole = _a.getAccessiblePagesForCurrentRole, isSuperAdmin = _a.isSuperAdmin, isCompanyManager = _a.isCompanyManager, isEmployee = _a.isEmployee, isSupervisor = _a.isSupervisor, isWorker = _a.isWorker, hasAdminPermissions = _a.hasAdminPermissions, hasManagerPermissions = _a.hasManagerPermissions, hasSupervisorPermissions = _a.hasSupervisorPermissions;
    var permissions = getCurrentRolePermissions();
    var accessiblePages = getAccessiblePagesForCurrentRole();
    var t = (0, react_i18next_1.useTranslation)().t;
    var permissionIcons = {
        'dashboard:view': lucide_react_1.Eye,
        'companies:view': lucide_react_1.Users,
        'employees:view': lucide_react_1.User,
        'reports:view': lucide_react_1.BarChart3,
        'settings:view': lucide_react_1.Settings,
        'attendance:view': lucide_react_1.Calendar,
        'payroll:view': lucide_react_1.DollarSign,
        'documents:view': lucide_react_1.FileText,
        'training:view': lucide_react_1.GraduationCap,
        'ai_dashboard:view': lucide_react_1.Bot
    };
    var getPermissionIcon = function (permission) {
        var _a;
        var basePermission = permission.split(':')[0];
        return (_a = permissionIcons["".concat(basePermission, ":view")]) !== null && _a !== void 0 ? _a : lucide_react_1.Shield;
    };
    return ((0, jsx_runtime_1.jsxs)("div", { className: "space-y-6 p-6", children: [(0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsxs)(card_1.CardHeader, { children: [(0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Shield, { className: "h-5 w-5" }), "\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u062F\u0648\u0631 \u0627\u0644\u062D\u0627\u0644\u064A"] }), (0, jsx_runtime_1.jsx)(card_1.CardDescription, { children: "\u0639\u0631\u0636 \u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u062F\u0648\u0631 \u0648\u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0627\u062A \u0627\u0644\u0645\u062A\u0627\u062D\u0629" })] }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: "space-y-4", children: [(0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("h4", { className: "font-semibold mb-2", children: "\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u062F\u0648\u0631" }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-2", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between", children: [(0, jsx_runtime_1.jsx)("span", { className: "text-muted-foreground", children: "\u0627\u0644\u062F\u0648\u0631:" }), (0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: "secondary", children: roleLabel })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between", children: [(0, jsx_runtime_1.jsx)("span", { className: "text-muted-foreground", children: "\u0627\u0644\u0645\u0633\u062A\u0648\u0649:" }), (0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: "outline", children: roleLevel })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between", children: [(0, jsx_runtime_1.jsx)("span", { className: "text-muted-foreground", children: "\u0627\u0644\u0631\u0645\u0632:" }), (0, jsx_runtime_1.jsx)("code", { className: "text-sm bg-muted px-2 py-1 rounded", children: currentRole })] })] })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("h4", { className: "font-semibold mb-2", children: "\u0627\u0644\u0648\u0635\u0641" }), (0, jsx_runtime_1.jsx)("p", { className: "text-sm text-muted-foreground", children: roleDescription })] })] }), (0, jsx_runtime_1.jsx)(separator_1.Separator, {}), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("h4", { className: "font-semibold mb-3", children: "\u0646\u0648\u0639 \u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0627\u062A" }), (0, jsx_runtime_1.jsxs)("div", { className: "flex flex-wrap gap-2", children: [isSuperAdmin() && (0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: "destructive", children: "\u0645\u0633\u0624\u0648\u0644 \u0639\u0627\u0645" }), isCompanyManager() && (0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: "default", children: "\u0645\u062F\u064A\u0631 \u0634\u0631\u0643\u0629" }), isEmployee() && (0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: "secondary", children: "\u0645\u0648\u0638\u0641 \u0625\u062F\u0627\u0631\u064A" }), isSupervisor() && (0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: "outline", children: "\u0645\u0634\u0631\u0641" }), isWorker() && (0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: "outline", children: "\u0639\u0627\u0645\u0644" }), hasAdminPermissions() && (0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: "destructive", children: "\u0635\u0644\u0627\u062D\u064A\u0627\u062A \u0625\u062F\u0627\u0631\u064A\u0629" }), hasManagerPermissions() && (0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: "default", children: "\u0635\u0644\u0627\u062D\u064A\u0627\u062A \u0625\u062F\u0627\u0631\u064A\u0629 \u0645\u062A\u0648\u0633\u0637\u0629" }), hasSupervisorPermissions() && (0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: "secondary", children: "\u0635\u0644\u0627\u062D\u064A\u0627\u062A \u0645\u0634\u0631\u0641" })] })] })] })] }), (0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsxs)(card_1.CardHeader, { children: [(0, jsx_runtime_1.jsx)(card_1.CardTitle, { children: "\u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0627\u062A \u0627\u0644\u0645\u062A\u0627\u062D\u0629" }), (0, jsx_runtime_1.jsxs)(card_1.CardDescription, { children: ["\u062C\u0645\u064A\u0639 \u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0627\u062A \u0627\u0644\u0645\u0645\u0646\u0648\u062D\u0629 \u0644\u0644\u062F\u0648\u0631 \u0627\u0644\u062D\u0627\u0644\u064A (", permissions.length, " \u0635\u0644\u0627\u062D\u064A\u0629)"] })] }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { children: (0, jsx_runtime_1.jsx)("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3", children: permissions.map(function (permission) {
                                var Icon = getPermissionIcon(permission);
                                var _a = permission.split(':'), resource = _a[0], action = _a[1];
                                return ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-3 p-3 border rounded-lg hover:bg-muted/50 transition-colors", children: [(0, jsx_runtime_1.jsx)(Icon, { className: "h-4 w-4 text-primary" }), (0, jsx_runtime_1.jsxs)("div", { className: "flex-1", children: [(0, jsx_runtime_1.jsx)("div", { className: "font-medium text-sm", children: resource }), (0, jsx_runtime_1.jsx)("div", { className: "text-xs text-muted-foreground", children: action })] })] }, permission));
                            }) }) })] }), (0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsxs)(card_1.CardHeader, { children: [(0, jsx_runtime_1.jsx)(card_1.CardTitle, { children: "\u0627\u0644\u0635\u0641\u062D\u0627\u062A \u0627\u0644\u0645\u062A\u0627\u062D\u0629" }), (0, jsx_runtime_1.jsxs)(card_1.CardDescription, { children: ["\u0627\u0644\u0635\u0641\u062D\u0627\u062A \u0627\u0644\u062A\u064A \u064A\u0645\u0643\u0646 \u0627\u0644\u0648\u0635\u0648\u0644 \u0625\u0644\u064A\u0647\u0627 (", accessiblePages.length, " \u0635\u0641\u062D\u0629)"] })] }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { children: (0, jsx_runtime_1.jsx)("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3", children: accessiblePages.map(function (page) {
                                var Icon = getPermissionIcon(page);
                                return ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-3 p-3 border rounded-lg hover:bg-muted/50 transition-colors", children: [(0, jsx_runtime_1.jsx)(Icon, { className: "h-4 w-4 text-primary" }), (0, jsx_runtime_1.jsxs)("div", { className: "flex-1", children: [(0, jsx_runtime_1.jsx)("div", { className: "font-medium text-sm", children: page }), (0, jsx_runtime_1.jsx)("div", { className: "text-xs text-muted-foreground", children: "\u0635\u0641\u062D\u0629 \u0645\u062A\u0627\u062D\u0629" })] })] }, page));
                            }) }) })] }), (0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsxs)(card_1.CardHeader, { children: [(0, jsx_runtime_1.jsx)(card_1.CardTitle, { children: "\u0627\u062E\u062A\u0628\u0627\u0631 \u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0627\u062A" }), (0, jsx_runtime_1.jsx)(card_1.CardDescription, { children: "\u0627\u062E\u062A\u0628\u0627\u0631 \u0627\u0644\u0648\u0635\u0648\u0644 \u0644\u0644\u0635\u0641\u062D\u0627\u062A \u0627\u0644\u0645\u062E\u062A\u0644\u0641\u0629" })] }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { children: (0, jsx_runtime_1.jsx)("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3", children: [
                                { 'id': 'companies', 'label': 'إدارة الشركات', 'icon': lucide_react_1.Users },
                                { 'id': 'employees', 'label': 'إدارة الموظفين', 'icon': lucide_react_1.User },
                                { 'id': 'reports', 'label': 'التقارير', 'icon': lucide_react_1.BarChart3 },
                                { 'id': 'settings', 'label': t('settings'), 'icon': lucide_react_1.Settings },
                                { 'id': 'attendance', 'label': 'الحضور', 'icon': lucide_react_1.Calendar },
                                { 'id': 'payroll', 'label': 'الرواتب', 'icon': lucide_react_1.DollarSign },
                                { 'id': 'documents', 'label': 'المستندات', 'icon': lucide_react_1.FileText },
                                { 'id': 'training', 'label': 'التدريب', 'icon': lucide_react_1.GraduationCap },
                                { 'id': 'ai-dashboard', 'label': 'لوحة التحكم الذكية', 'icon': lucide_react_1.Bot }
                            ].map(function (page) {
                                var Icon = page.icon;
                                var canAccess = accessiblePages.includes(page.id);
                                return ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-3 p-3 border rounded-lg transition-colors ".concat(canAccess
                                        ? 'bg-green-50 border-green-200 hover:bg-green-100'
                                        : 'bg-red-50 border-red-200 hover:bg-red-100'), children: [(0, jsx_runtime_1.jsx)(Icon, { className: "h-4 w-4 ".concat(canAccess ? 'text-green-600' : 'text-red-600') }), (0, jsx_runtime_1.jsxs)("div", { className: "flex-1", children: [(0, jsx_runtime_1.jsx)("div", { className: "font-medium text-sm", children: page.label }), (0, jsx_runtime_1.jsx)("div", { className: "text-xs text-muted-foreground", children: canAccess ? 'متاح' : 'غير متاح' })] }), (0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: canAccess ? 'default' : 'secondary', children: canAccess ? '✓' : '✗' })] }, page.id));
                            }) }) })] })] }));
}
